/*
반지름이 1, 2, ..., n으로 차례대로 커지는 원판을 이용
원판의 반지름이 r이라고 할 때, 그 원판을 r번째 원판이라고 칭함
각각의 원판에는 m개의 정수가 적혀있음
r번째 원판에 적힌 m번째 정수를 (r, m)이라고 칭함
12시 방향부터 m개의 정수가 시계방향 순서대로 매겨짐

1.
해당 게임판의 각각의 원판을 회전시켜주려 함
각각 원판의 회전은 독립적으로 이루어짐. 즉 한 원판이 회전할 때 다른 원판에 영향을 주지 않음
회전 요청은 회전하는 원판의 종류 x, 방향 d, 회전 칸 수 k로 주어짐
x의 경우 회전하는 원판의 번호가 x의 배수일 경우 회전을 함
d의 경우 시계 방향과 반시계 방향으로 주어지며
k의 경우 몇 칸을 회전시킬지 결정하며
시계 방향일 경우 1번째 정수를 1+k번째 정수 위치에 위치
반시계 방향일 경우 m번째 정수를 m-k번째 정수 위치에 위치

2.
회전시킨 이후 원판에 수가 남아 있으면 인접하면서 숫자가 같은 수를 지움
인접은 같은 판에서 인접한 경우와 다른 판에서 인접한 경우 모두 생각

3.
(만약 1번부터 n번까지의 원판에 지워지는 수가 없는 경우)에는 원판 전체에 적힌 수의 평균을 구해서 정규화
정규화란 전체 원판에서 평균보다 큰 수는 1을 빼고, 작은 수는 1을 더해주는 과정
평균과 같은 수는 따로 변형하지 않으며, 원판에 남은 수가 없을 경우에는 정규화를 진행하지 않음
평균을 구할 때는 소숫점 아래의 수는 버림

게임판을 총 q번 회전 시킨 후에 게임판에 남아있는 수의 총합
*/
#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <queue>
#include <vector>
using namespace std;

const int GRIDSIZE = 50;

int n, m, q;
int grid[GRIDSIZE + 10][GRIDSIZE + 10];
bool visited[GRIDSIZE + 10][GRIDSIZE + 10];
vector<pair<int, int>> cluster_pos;

int dx[4] = { 0,1,0,-1 };
int dy[4] = { 1,0,-1,0 };

void print() {
	cout << "grid" << "\n";
    	for (int i = 0; i < n; i++) {
        		for (int j = 0; j < m; j++) {
                			cout << grid[i][j] << " ";
                            		}
                                    		cout << "\n";
                                            	}
                                                	cout << "\n";
                                                    }

                                                    void rotateGrid(int x, int d, int k) {
                                                    	for (int row = 0; row < n; row++) {
                                                        		if ((row + 1) % x != 0) continue;
                                                                		
                                                                        		if (d == 0) { // 시계방향
                                                                                			for (int cnt = 1; cnt <= k; cnt++) {
                                                                                            				int tmp = grid[row][m - 1];
                                                                                                            				for (int col = m - 1; col >= 1; col--) {
                                                                                                                            					grid[row][col] = grid[row][col - 1];
                                                                                                                                                				}
                                                                                                                                                                				grid[row][0] = tmp;
                                                                                                                                                                                			}
                                                                                                                                                                                            		}
                                                                                                                                                                                                    		else if (d == 1) { // 반시계방향
                                                                                                                                                                                                            			for (int cnt = 1; cnt <= k; cnt++) {
                                                                                                                                                                                                                        				int tmp = grid[row][0];
                                                                                                                                                                                                                                        				for (int col = 0; col < m - 1; col++) {
                                                                                                                                                                                                                                                        					grid[row][col] = grid[row][col + 1];
                                                                                                                                                                                                                                                                            				}
                                                                                                                                                                                                                                                                                            				grid[row][m - 1] = tmp;
                                                                                                                                                                                                                                                                                                            			}
                                                                                                                                                                                                                                                                                                                        		}
                                                                                                                                                                                                                                                                                                                                	}
                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                    /*
                                                                                                                                                                                                                                                                                                                                    2.
                                                                                                                                                                                                                                                                                                                                    회전시킨 이후 원판에 수가 남아 있으면 인접하면서 숫자가 같은 수를 지움
                                                                                                                                                                                                                                                                                                                                    인접은 같은 판에서 인접한 경우와 다른 판에서 인접한 경우 모두 생각

                                                                                                                                                                                                                                                                                                                                    3.
                                                                                                                                                                                                                                                                                                                                    (만약 1번부터 n번까지의 원판에 지워지는 수가 없는 경우)에는 원판 전체에 적힌 수의 평균을 구해서 정규화
                                                                                                                                                                                                                                                                                                                                    정규화란 전체 원판에서 평균보다 큰 수는 1을 빼고, 작은 수는 1을 더해주는 과정
                                                                                                                                                                                                                                                                                                                                    평균과 같은 수는 따로 변형하지 않으며, 원판에 남은 수가 없을 경우에는 정규화를 진행하지 않음
                                                                                                                                                                                                                                                                                                                                    평균을 구할 때는 소숫점 아래의 수는 버림

                                                                                                                                                                                                                                                                                                                                    게임판을 총 q번 회전 시킨 후에 게임판에 남아있는 수의 총합
                                                                                                                                                                                                                                                                                                                                    */

                                                                                                                                                                                                                                                                                                                                    bool isNumExist() {
                                                                                                                                                                                                                                                                                                                                    	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                        		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                			if (grid[i][j] > 0) return true;
                                                                                                                                                                                                                                                                                                                                                            		}
                                                                                                                                                                                                                                                                                                                                                                    	}
                                                                                                                                                                                                                                                                                                                                                                        	return false;
                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                            bool inRange(int x, int y) {
                                                                                                                                                                                                                                                                                                                                                                            	return (x >= 0 && x < n && y >= 0 && y < m);
                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                void BFS(int x, int y) {
                                                                                                                                                                                                                                                                                                                                                                                	cluster_pos.clear();
                                                                                                                                                                                                                                                                                                                                                                                    	int num = grid[x][y];

                                                                                                                                                                                                                                                                                                                                                                                        	queue<pair<int, int>> q;

                                                                                                                                                                                                                                                                                                                                                                                            	q.push({ x, y }); // 이거 안넣음 제정신??
                                                                                                                                                                                                                                                                                                                                                                                                	visited[x][y] = true;
                                                                                                                                                                                                                                                                                                                                                                                                    	cluster_pos.push_back({ x, y });

                                                                                                                                                                                                                                                                                                                                                                                                        	while (!q.empty()) {
                                                                                                                                                                                                                                                                                                                                                                                                            		int cx = q.front().first;
                                                                                                                                                                                                                                                                                                                                                                                                                    		int cy = q.front().second;
                                                                                                                                                                                                                                                                                                                                                                                                                            		q.pop();

                                                                                                                                                                                                                                                                                                                                                                                                                                    		// 오른쪽
                                                                                                                                                                                                                                                                                                                                                                                                                                            		int nx = cx + dx[0];
                                                                                                                                                                                                                                                                                                                                                                                                                                                    		int ny = cy + dy[0];
                                                                                                                                                                                                                                                                                                                                                                                                                                                            		if (inRange(nx, ny) && !visited[nx][ny] && grid[nx][ny] == num) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			q.push({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			visited[nx][ny] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			cluster_pos.push_back({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		else if(!inRange(nx, ny) && !visited[nx][0] && grid[nx][0] == num) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        			q.push({ nx, 0 });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			visited[nx][0] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			cluster_pos.push_back({ nx, 0});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		// 아래쪽
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		nx = cx + dx[1];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		ny = cy + dy[1];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		if (inRange(nx, ny) && !visited[nx][ny] && grid[nx][ny] == num) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			q.push({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			visited[nx][ny] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			cluster_pos.push_back({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		// 왼쪽
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		nx = cx + dx[2];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		ny = cy + dy[2];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		if (inRange(nx, ny) && !visited[nx][ny] && grid[nx][ny] == num) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			q.push({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			visited[nx][ny] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        			cluster_pos.push_back({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		else if (!inRange(nx, ny) && !visited[nx][m - 1] && grid[nx][m - 1] == num) { // 저건 범위에 없어야지
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			q.push({ nx, m- 1 }); // 오타나거나 코드가 갑자기 지워지지 않도록 주의!!!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			visited[nx][m - 1] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			cluster_pos.push_back({ nx, m - 1 });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		// 위쪽
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		nx = cx + dx[3];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		ny = cy + dy[3];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		if (inRange(nx, ny) && !visited[nx][ny] && grid[nx][ny] == num) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			q.push({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			visited[nx][ny] = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        			cluster_pos.push_back({ nx, ny });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                bool removeNum() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	if (!isNumExist()) return false;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	bool is_removed = false;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        			visited[i][j] = false;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			if (grid[i][j] == 0 || visited[i][j]) continue;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        			BFS(i, j);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			if (cluster_pos.size() >= 2) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                				is_removed = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                				for (int k = 0; k < (int)cluster_pos.size(); k++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                					int x = cluster_pos[k].first;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    					int y = cluster_pos[k].second;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        					grid[x][y] = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            				}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	return is_removed;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        void normalizeGrid() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	if (!isNumExist()) return;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	int total_num = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	int cnt = 0;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			if (grid[i][j] > 0) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            				total_num += grid[i][j];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            				cnt++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            			}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	int average = total_num / cnt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			if (grid[i][j] > average) grid[i][j]--;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			else if (grid[i][j] > 0 && grid[i][j] < average) grid[i][j]++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            int main() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	//freopen("sample_input.txt", "r", stdin);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	cin >> n >> m >> q;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    			cin >> grid[i][j];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	//print();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	for (int turn = 1; turn <= q; turn++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		int x, d, k; cin >> x >> d >> k;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		rotateGrid(x, d, k);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		//print();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		if (!removeNum()) normalizeGrid();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    		//print();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	int ans = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	for (int i = 0; i < n; i++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        		for (int j = 0; j < m; j++) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                			if (grid[i][j] > 0) ans += grid[i][j];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            		}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        	cout << ans << "\n";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	return 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }